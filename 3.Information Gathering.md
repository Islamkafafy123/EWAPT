# Gather Info About Target
- info like
  - infrastructure
  - application logic
  - ips,domains,subdomains
  - virtual Hosts
- Gatther info about organization
- WHOIS Lookup
- WHOIS runs on TCP 43 port
- After WHOIS we got IP so We Go to DNS Query for the ips we foound
- DNS queries produce list called resource record
- ![resource record](https://github.com/Islamkafafy123/Ewapt/blob/main/pictures/resource%20record.jpeg)
- NSLookup is a tool to translate hostname to ipadrres
- Find Target ISP using Netcraft
- check video web app info Gather
# Infrastructre
- Discover What kind of web server running
- two most commen application are apache and microsoft iis
- discovering iis we will know that server running using os in the windows server family
- apache can be linux not sure
- iis components called isapi extensions **extending functionalites of the web server** like URL rewriting
![url rewriting](https://github.com/Islamkafafy123/EWAPT-EWAPTX/blob/main/pictures/url%20rewriting.jpeg)
- we can use netcraft to fingerprint the webserver from the domain provided
- nameserver is the dns server that replies to all lookup queires regardless the **nslookup -type=NS microsoft.com**
- in case of internal webserver netcraft cannot be used we use different techniques( netcat,httprint,whatweb,wappalyzer) they probe the webserver with a series of request and compare the respone to thier database of signitures
- Netcat establish connection to the webserver and look at the server field
- look at the x-powered by header
- cookies are intersting resource that is worth checking
- Whatweb used to recognize website technologies
# fingerprinting webserver modules
- url rewriting is done on apache using mod_rewrite module or .htaccess
- on iis url rewriting is handeled by ionic isabi rewrite or helicon isapi rewrite
- input validation attack is the use of malformed input using the url paramater
- not having the real url but just the rewritten one will make it difficult but still possible using other channels like forms,cookie and headers.
- search engine friendly url can be reversed engineer the translation rules
- input from forms can be tampered
# enumrating subdomain
- netcraft can be used to enumrate subdomain
- **enumrate with google**
  - site:.microsoft.com
  - site:.microsoft.com -inurl:www.
  - (-) operator means delete
  - site:.microsoft.com -insite:www.microsoft.com
  - Tools
    - subbrute
    - dnsrecon
    - the harvester
    ( these tools are useful for internal pentest )
- ZoneTransfer : process by which dnszone file are copied from primary dns server to secondry dns server ,they are result of misconfigration and should be enabled only to trusted ip addresses
  - **nslookup -type=NS microsoft.com** --> windows
  - Dig on Linux
  - Check video of subdomain enum
# Finding Virtual Hosts 
- Virtual Hosts are website that share ip addres with diffrent virtual hosts
- these hosts can be doamin or subdomains





